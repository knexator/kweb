{"mappings":"C,A,W,S,E,C,C,C,C,C,C,C,E,O,e,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,S,E,C,E,O,G,E,W,E,Q,C,C,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,C,E,E,C,E,E,E,iB,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,Q,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,K,E,Q,E,E,S,E,O,C,I,E,A,M,uB,E,I,O,E,K,mB,C,C,E,S,S,C,C,C,E,C,C,E,C,C,E,E,kB,G,E,S,Q,S,C,C,C,ECAA,a,E,E,Q,W,W,O,C,E,S,C,E,O,E,C,G,E,E,Q,U,W,O,C,E,S,C,E,O,E,C,GAEA,IAcA,EACA,EAfI,EAAU,CAAC,EAcf,EAbA,SAAkB,CAAK,EAErB,IAAK,IADD,EAAO,OAAO,KAAK,GACd,EAAI,EAAG,EAAI,EAAK,OAAQ,IAC/B,CAAO,CAAC,CAAI,CAAC,EAAE,CAAC,CAAG,CAAK,CAAC,CAAI,CAAC,EAAE,CAAC,AAErC,EASA,EARA,SAAiB,CAAE,EACjB,IAAI,EAAW,CAAO,CAAC,EAAG,CAC1B,GAAI,AAAY,MAAZ,EACF,MAAM,AAAI,MAAM,oCAAsC,GAExD,OAAO,CACT,C,G,E,S,Q,S,C,C,C,E,E,E,Q,e,W,O,C,E,S,C,E,O,E,C,ECfA,CAAA,aAEA,IAkCA,EAlCI,EAAY,CAAC,EAkCjB,EAjCA,SAA4B,CAAE,EAC5B,IAAI,EAAQ,CAAS,CAAC,EAAG,CAKzB,OAJK,IACH,EAAQ,AAKZ,WACE,GAAI,CACF,MAAM,AAAI,OACZ,CAAE,MAAO,EAAK,CACZ,IAAI,EAAU,AAAC,CAAA,GAAK,EAAI,KAAA,EAAO,MAAM,oEACrC,GAAI,EAGF,MAMI,AAAA,CAAA,GANc,CAAO,CAAC,EAAE,AAMnB,EAAK,QAAQ,0EAA2E,MAAQ,GAJ7G,CACA,MAAO,GACT,IAhBI,CAAS,CAAC,EAAG,CAAG,GAEX,CACT,C,GCVA,AAAA,EAAA,SAAA,SAA8C,KAAK,MAAM,+I,I,E,E,S,E,C,EEAzD,EAAe,usB,I,E,C,ECAf,EAAe,iO,I,E,C,ECAf,EAAe,usB,I,E,C,ECAf,EAAe,6WJmBf,IAAM,EAAS,SAAS,cAAc,KAEtC,CAAA,EAAO,MAAQ,EACf,EAAO,OAAS,EAChB,IAAM,EAAK,EAAO,WAAW,SAAU,CAAE,MAAO,CAAA,CAAM,GACtD,EAAG,OAAO,EAAG,OACb,EAAG,UAAU,EAAG,UAAW,EAAG,qBAC9B,EAAG,WAAW,GAAK,GAAK,IAAM,GAE9B,IAAM,EAAsB,EAAA,kBAAuB,EAAI,CAAC,EAAA,GAAiB,EAAA,GAAgB,EACnF,EAAoB,EAAA,kBAAuB,EAAI,CAAC,EAAA,GAAe,EAAA,GAAc,EAE7E,EAAc,EAAA,2BAAgC,EAAI,CACpD,SAAU,CACN,KAAM,CAEF,EAAK,EACL,EAAK,EACL,EAAK,EAEL,EAAK,EACL,EAAK,EACL,EAAK,EACR,CACD,cAAe,CAEnB,CACJ,G,I,E,C,EK9CA,EAAiB,AAAA,EAAA,SAAA,aAA6C,SAAW,MAAQ,AAAA,EAAA,SAAA,QAA6C,SLwF9H,IAAM,EAAW,EAAA,eAAoB,EAAI,CACrC,SAAU,CACN,IAAK,IAAA,IAAA,GAAyC,UAElD,CACJ,GAKM,EAAuB,EAAA,uBAA4B,EAAI,EAAmB,cAEhF,EAAG,oBAAoB,EAAoB,QACvC,EAAG,qBAAqB,EAAoB,QAAS,cACrD,GAEJ,EAAG,oBAAoB,EAAkB,QACrC,EAAG,qBAAqB,EAAkB,QAAS,cACnD,GAIJ,IAAI,EAAK,IACL,EAAK,IAEL,EAAO,EA0BX,sBAzBA,SAAS,EAAO,CAAG,MA1DA,EAAuB,EAAW,EA2D7C,EAAA,0BAA+B,KAE/B,EAAG,SAAS,EAAG,EAAG,EAAG,mBAAoB,EAAG,qBAG5C,EAAA,iBAAsB,EAAsB,CACxC,aAAc,CAAC,EAAG,OAAO,MAAO,EAAG,OAAO,OAAO,AACrD,IAEJ,IAAI,EAAQ,EAAM,EAClB,EAAO,EAEP,EAAM,AAAA,CAAA,EAAK,CAAA,EAAS,EAAG,OAAO,MAC9B,EAAM,AAAA,CAAA,EAAK,CAAA,EAAS,EAAG,OAAO,OAG9B,EAAG,MAAM,EAAG,kBA3EG,EA6EL,EAAS,SA7EmB,EA6ET,EA7EoB,EA6EhB,EA5EjC,EAAG,WAAW,EAAoB,SAClC,EAAA,iBAAsB,EAAI,EAAqB,GAC/C,EAAA,wBAA6B,EAAI,EAAqB,GACtD,EAAA,YAAiB,EAAqB,CAClC,OAAQ,CAwEyB,IAAK,IAxExB,CACd,WAAY,CAAC,EAAG,EAAE,CAClB,UAAW,CACf,GACA,EAAA,eAAoB,EAAI,GAWxB,EAAG,WAAW,EAAkB,SAChC,EAAA,iBAAsB,EAAI,EAAmB,GAC7C,EAAA,wBAA6B,EAAI,EAAmB,GACpD,EAAA,YAAiB,EAAmB,CAChC,OAAQ,CAsDS,IAAK,IAtDR,CACd,WAAY,CAqDL,IAAK,IArDM,CAClB,SAAU,GACd,GACA,EAAA,eAAoB,EAAI,GAoDxB,sBAAsB,EAC1B,E","sources":["<anon>","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-8200da351ea9b2c9.js","uniformBufferObjects/main.ts","uniformBufferObjects/shaders/sprite.vert","uniformBufferObjects/shaders/sprite.frag","uniformBufferObjects/shaders/circ.vert","uniformBufferObjects/shaders/circ.frag","node_modules/@parcel/runtime-js/lib/runtime-1cd69cbf0e3653be.js"],"sourcesContent":["(function () {\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\nvar $parcel$global =\ntypeof globalThis !== 'undefined'\n  ? globalThis\n  : typeof self !== 'undefined'\n  ? self\n  : typeof window !== 'undefined'\n  ? window\n  : typeof global !== 'undefined'\n  ? global\n  : {};\nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire94c2\"];\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire94c2\"] = parcelRequire;\n}\nparcelRequire.register(\"iE7OH\", function(module, exports) {\n\n$parcel$export(module.exports, \"register\", function () { return $0380ce8f1f064ccc$export$6503ec6e8aabbaf; }, function (v) { return $0380ce8f1f064ccc$export$6503ec6e8aabbaf = v; });\n$parcel$export(module.exports, \"resolve\", function () { return $0380ce8f1f064ccc$export$f7ad0328861e2f03; }, function (v) { return $0380ce8f1f064ccc$export$f7ad0328861e2f03 = v; });\nvar $0380ce8f1f064ccc$export$6503ec6e8aabbaf;\nvar $0380ce8f1f064ccc$export$f7ad0328861e2f03;\n\"use strict\";\nvar $0380ce8f1f064ccc$var$mapping = {};\nfunction $0380ce8f1f064ccc$var$register(pairs) {\n    var keys = Object.keys(pairs);\n    for(var i = 0; i < keys.length; i++)$0380ce8f1f064ccc$var$mapping[keys[i]] = pairs[keys[i]];\n}\nfunction $0380ce8f1f064ccc$var$resolve(id) {\n    var resolved = $0380ce8f1f064ccc$var$mapping[id];\n    if (resolved == null) throw new Error(\"Could not resolve bundle with id \" + id);\n    return resolved;\n}\n$0380ce8f1f064ccc$export$6503ec6e8aabbaf = $0380ce8f1f064ccc$var$register;\n$0380ce8f1f064ccc$export$f7ad0328861e2f03 = $0380ce8f1f064ccc$var$resolve;\n\n});\n\nparcelRequire.register(\"aNJCr\", function(module, exports) {\n\n$parcel$export(module.exports, \"getBundleURL\", function () { return $7dd1ddf6834435ca$export$bdfd709ae4826697; }, function (v) { return $7dd1ddf6834435ca$export$bdfd709ae4826697 = v; });\nvar $7dd1ddf6834435ca$export$bdfd709ae4826697;\nvar $7dd1ddf6834435ca$export$c9e73fbda7da57b6;\nvar $7dd1ddf6834435ca$export$5a759dc7a1cfb72a;\n\"use strict\";\nvar $7dd1ddf6834435ca$var$bundleURL = {};\nfunction $7dd1ddf6834435ca$var$getBundleURLCached(id) {\n    var value = $7dd1ddf6834435ca$var$bundleURL[id];\n    if (!value) {\n        value = $7dd1ddf6834435ca$var$getBundleURL();\n        $7dd1ddf6834435ca$var$bundleURL[id] = value;\n    }\n    return value;\n}\nfunction $7dd1ddf6834435ca$var$getBundleURL() {\n    try {\n        throw new Error();\n    } catch (err) {\n        var matches = (\"\" + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n        if (matches) // The first two stack frames will be this function and getBundleURLCached.\n        // Use the 3rd one, which will be a runtime in the original bundle.\n        return $7dd1ddf6834435ca$var$getBaseURL(matches[2]);\n    }\n    return \"/\";\n}\nfunction $7dd1ddf6834435ca$var$getBaseURL(url) {\n    return (\"\" + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, \"$1\") + \"/\";\n}\n// TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\nfunction $7dd1ddf6834435ca$var$getOrigin(url) {\n    var matches = (\"\" + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n    if (!matches) throw new Error(\"Origin not found\");\n    return matches[0];\n}\n$7dd1ddf6834435ca$export$bdfd709ae4826697 = $7dd1ddf6834435ca$var$getBundleURLCached;\n$7dd1ddf6834435ca$export$c9e73fbda7da57b6 = $7dd1ddf6834435ca$var$getBaseURL;\n$7dd1ddf6834435ca$export$5a759dc7a1cfb72a = $7dd1ddf6834435ca$var$getOrigin;\n\n});\n\nvar $3eb6e8a0563ea2a1$exports = {};\n\n(parcelRequire(\"iE7OH\")).register(JSON.parse('{\"jPHNg\":\"index.f27226ea.js\",\"b3TSu\":\"sprite.c1d1c491.png\",\"e3yn0\":\"index.b8865dd2.js\"}'));\n\n\nvar $6MzNI = parcelRequire(\"6MzNI\");\nvar $ba7b96a2d8ccaf92$exports = {};\n$ba7b96a2d8ccaf92$exports = \"#version 300 es\\n#define GLSLIFY 1\\n\\n// [0, 1]^2\\nin vec2 a_vertex;\\n\\nuniform CommonData {\\n    vec2 u_resolution;\\n};\\n\\nuniform vec2 u_position;\\nuniform vec2 u_size;\\nout vec2 v_texcoord;\\n\\nvoid main() {\\n    // if size is 100 & screen is 400, then\\n    // clip space result width will be .5\\n    vec2 pos = 2.0 * a_vertex * u_size / u_resolution;\\n\\n    // if position is 200 & screen is 400, then\\n    // clip space result offset will be .5\\n    pos += 2.0 * u_position / u_resolution;\\n\\n    // pos of 0 should go to the top left\\n    pos -= vec2(1, 1);\\n\\n    // ypos = down\\n    pos.y = -pos.y;\\n\\n    gl_Position = vec4(pos, 0, 1);\\n\\n    v_texcoord = a_vertex;\\n}\\n\\n// todo: investigate glslify\";\n\n\nvar $5a748d5495a18343$exports = {};\n$5a748d5495a18343$exports = \"#version 300 es\\nprecision highp float;\\n#define GLSLIFY 1\\n\\nin vec2 v_texcoord;\\n\\n// sprite stuff\\nuniform sampler2D u_texture;\\n\\nout vec4 out_color;\\n\\nvoid main() {\\n    out_color = texture(u_texture, v_texcoord);\\n}\";\n\n\nvar $a18be831e98105e7$exports = {};\n$a18be831e98105e7$exports = \"#version 300 es\\n#define GLSLIFY 1\\n\\n// [0, 1]^2\\nin vec2 a_vertex;\\n\\nuniform CommonData {\\n    vec2 u_resolution;\\n};\\n\\nuniform vec2 u_position;\\nuniform vec2 u_size;\\nout vec2 v_texcoord;\\n\\nvoid main() {\\n    // if size is 100 & screen is 400, then\\n    // clip space result width will be .5\\n    vec2 pos = 2.0 * a_vertex * u_size / u_resolution;\\n\\n    // if position is 200 & screen is 400, then\\n    // clip space result offset will be .5\\n    pos += 2.0 * u_position / u_resolution;\\n\\n    // pos of 0 should go to the top left\\n    pos -= vec2(1, 1);\\n\\n    // ypos = down\\n    pos.y = -pos.y;\\n\\n    gl_Position = vec4(pos, 0, 1);\\n\\n    v_texcoord = a_vertex;\\n}\\n\\n// todo: investigate glslify\";\n\n\nvar $215f78529ee9cbe6$exports = {};\n$215f78529ee9cbe6$exports = \"#version 300 es\\nprecision highp float;\\n#define GLSLIFY 1\\n\\nin vec2 v_texcoord;\\n\\n// circ stuff\\nuniform float u_radius;\\n\\nout vec4 out_color;\\n\\nvoid main() {\\n    float distSq = dot(v_texcoord - .5, v_texcoord - .5);\\n    float alpha = smoothstep(u_radius * u_radius + .01, u_radius * u_radius - .01, distSq);\\n    out_color = vec4(vec3(distSq), alpha);\\n}\";\n\n\n// Specify common uniforms using UBOs\n// not working :(\n// twgl has no support for using the same UBO in multiple shaders\n// to get this working, it'd have to be more handmade\n// for the moment, forget about it\n//// init\nconst $b2fabd0de3e83b26$var$canvas = document.querySelector(\"#c\");\n// ensure that we trigger a resize on the first frame\n$b2fabd0de3e83b26$var$canvas.width = 1;\n$b2fabd0de3e83b26$var$canvas.height = 1;\nconst $b2fabd0de3e83b26$var$gl = $b2fabd0de3e83b26$var$canvas.getContext(\"webgl2\", {\n    alpha: false\n});\n$b2fabd0de3e83b26$var$gl.enable($b2fabd0de3e83b26$var$gl.BLEND);\n$b2fabd0de3e83b26$var$gl.blendFunc($b2fabd0de3e83b26$var$gl.SRC_ALPHA, $b2fabd0de3e83b26$var$gl.ONE_MINUS_SRC_ALPHA);\n$b2fabd0de3e83b26$var$gl.clearColor(0.5, 0.5, 0.75, 1.0);\nconst $b2fabd0de3e83b26$var$sprite_program_info = $6MzNI.createProgramInfo($b2fabd0de3e83b26$var$gl, [\n    (0, (/*@__PURE__*/$parcel$interopDefault($ba7b96a2d8ccaf92$exports))),\n    (0, (/*@__PURE__*/$parcel$interopDefault($5a748d5495a18343$exports)))\n]);\nconst $b2fabd0de3e83b26$var$circ_program_info = $6MzNI.createProgramInfo($b2fabd0de3e83b26$var$gl, [\n    (0, (/*@__PURE__*/$parcel$interopDefault($a18be831e98105e7$exports))),\n    (0, (/*@__PURE__*/$parcel$interopDefault($215f78529ee9cbe6$exports)))\n]);\nconst $b2fabd0de3e83b26$var$buffer_info = $6MzNI.createBufferInfoFromArrays($b2fabd0de3e83b26$var$gl, {\n    a_vertex: {\n        data: [\n            // Triangle for 1,1 corner\n            1.0,\n            1.0,\n            0.0,\n            1.0,\n            1.0,\n            0.0,\n            // Triangle for 0,0 corner\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            1.0\n        ],\n        numComponents: 2\n    }\n});\n/**\r\n* Draws the given image\r\n* @param texture texture to draw\r\n* @param x distance in pixels to the left of the screen\r\n* @param y distance in pixels to the top of the screen\r\n* @param w width in pixels\r\n* @param h height in pixels\r\n*/ function $b2fabd0de3e83b26$var$drawImage(texture, x, y, w, h) {\n    $b2fabd0de3e83b26$var$gl.useProgram($b2fabd0de3e83b26$var$sprite_program_info.program);\n    $6MzNI.bindUniformBlock($b2fabd0de3e83b26$var$gl, $b2fabd0de3e83b26$var$sprite_program_info, $b2fabd0de3e83b26$var$common_data_ubo_info);\n    $6MzNI.setBuffersAndAttributes($b2fabd0de3e83b26$var$gl, $b2fabd0de3e83b26$var$sprite_program_info, $b2fabd0de3e83b26$var$buffer_info);\n    $6MzNI.setUniforms($b2fabd0de3e83b26$var$sprite_program_info, {\n        u_size: [\n            w,\n            h\n        ],\n        u_position: [\n            x,\n            y\n        ],\n        u_texture: texture\n    });\n    $6MzNI.drawBufferInfo($b2fabd0de3e83b26$var$gl, $b2fabd0de3e83b26$var$buffer_info);\n}\n/**\r\n* Draws a circle\r\n* @param x distance in pixels to the left of the screen\r\n* @param y distance in pixels to the top of the screen\r\n* @param w width in pixels\r\n* @param h height in pixels\r\n*/ function $b2fabd0de3e83b26$var$drawCircle(x, y, w, h) {\n    $b2fabd0de3e83b26$var$gl.useProgram($b2fabd0de3e83b26$var$circ_program_info.program);\n    $6MzNI.bindUniformBlock($b2fabd0de3e83b26$var$gl, $b2fabd0de3e83b26$var$circ_program_info, $b2fabd0de3e83b26$var$common_data_ubo_info);\n    $6MzNI.setBuffersAndAttributes($b2fabd0de3e83b26$var$gl, $b2fabd0de3e83b26$var$circ_program_info, $b2fabd0de3e83b26$var$buffer_info);\n    $6MzNI.setUniforms($b2fabd0de3e83b26$var$circ_program_info, {\n        u_size: [\n            w,\n            h\n        ],\n        u_position: [\n            x,\n            y\n        ],\n        u_radius: .25\n    });\n    $6MzNI.drawBufferInfo($b2fabd0de3e83b26$var$gl, $b2fabd0de3e83b26$var$buffer_info);\n}\nvar $58704e561e6d38f8$exports = {};\n\n\n$58704e561e6d38f8$exports = (parcelRequire(\"aNJCr\")).getBundleURL(\"jPHNg\") + \"../\" + (parcelRequire(\"iE7OH\")).resolve(\"b3TSu\");\n\n\n// load texture\nconst $b2fabd0de3e83b26$var$textures = $6MzNI.createTextures($b2fabd0de3e83b26$var$gl, {\n    sprite_1: {\n        src: new URL($58704e561e6d38f8$exports).toString()\n    }\n});\n// UBOs\n// full tutorial at https://gist.github.com/jialiang/2880d4cc3364df117320e8cb324c2880\n// twgl taken from https://twgljs.org/examples/uniform-buffer-objects.html\nconst $b2fabd0de3e83b26$var$common_data_ubo_info = $6MzNI.createUniformBlockInfo($b2fabd0de3e83b26$var$gl, $b2fabd0de3e83b26$var$circ_program_info, \"CommonData\");\n// link the ubo with each program\n$b2fabd0de3e83b26$var$gl.uniformBlockBinding($b2fabd0de3e83b26$var$sprite_program_info.program, $b2fabd0de3e83b26$var$gl.getUniformBlockIndex($b2fabd0de3e83b26$var$sprite_program_info.program, \"CommonData\"), 0 // index of the uniform block\n);\n$b2fabd0de3e83b26$var$gl.uniformBlockBinding($b2fabd0de3e83b26$var$circ_program_info.program, $b2fabd0de3e83b26$var$gl.getUniformBlockIndex($b2fabd0de3e83b26$var$circ_program_info.program, \"CommonData\"), 0 // index of the uniform block\n);\n// game logic\nlet $b2fabd0de3e83b26$var$px = 123;\nlet $b2fabd0de3e83b26$var$py = 234;\nlet $b2fabd0de3e83b26$var$last = 0;\nfunction $b2fabd0de3e83b26$var$update(now) {\n    if ($6MzNI.resizeCanvasToDisplaySize($b2fabd0de3e83b26$var$canvas)) {\n        // on resize\n        $b2fabd0de3e83b26$var$gl.viewport(0, 0, $b2fabd0de3e83b26$var$gl.drawingBufferWidth, $b2fabd0de3e83b26$var$gl.drawingBufferHeight);\n        // Change the global uniform\n        $6MzNI.setBlockUniforms($b2fabd0de3e83b26$var$common_data_ubo_info, {\n            u_resolution: [\n                $b2fabd0de3e83b26$var$gl.canvas.width,\n                $b2fabd0de3e83b26$var$gl.canvas.height\n            ]\n        });\n    }\n    let delta = now - $b2fabd0de3e83b26$var$last;\n    $b2fabd0de3e83b26$var$last = now;\n    $b2fabd0de3e83b26$var$px = ($b2fabd0de3e83b26$var$px + delta) % $b2fabd0de3e83b26$var$gl.canvas.width;\n    $b2fabd0de3e83b26$var$py = ($b2fabd0de3e83b26$var$py + delta) % $b2fabd0de3e83b26$var$gl.canvas.height;\n    //// draw\n    $b2fabd0de3e83b26$var$gl.clear($b2fabd0de3e83b26$var$gl.COLOR_BUFFER_BIT);\n    $b2fabd0de3e83b26$var$drawImage($b2fabd0de3e83b26$var$textures.sprite_1, $b2fabd0de3e83b26$var$px, $b2fabd0de3e83b26$var$py, 200, 200);\n    $b2fabd0de3e83b26$var$drawCircle(100, 200, 300, 400);\n    requestAnimationFrame($b2fabd0de3e83b26$var$update);\n}\nrequestAnimationFrame($b2fabd0de3e83b26$var$update);\n\n})();\n//# sourceMappingURL=index.f27226ea.js.map\n","\"use strict\";\n\nvar mapping = {};\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\nfunction resolve(id) {\n  var resolved = mapping[id];\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n  return resolved;\n}\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n  return value;\n}\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n  return '/';\n}\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\n// TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n  return matches[0];\n}\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"jPHNg\\\":\\\"index.f27226ea.js\\\",\\\"b3TSu\\\":\\\"sprite.c1d1c491.png\\\",\\\"e3yn0\\\":\\\"index.b8865dd2.js\\\"}\"));","import * as twgl from \"twgl.js\"\r\n\r\n// @ts-ignore\r\nimport sprite_vert_src from \"./shaders/sprite.vert\";\r\n// @ts-ignore\r\nimport sprite_frag_src from \"./shaders/sprite.frag\";\r\n// @ts-ignore\r\nimport circ_vert_src from \"./shaders/circ.vert\";\r\n// @ts-ignore\r\nimport circ_frag_src from \"./shaders/circ.frag\";\r\n\r\n// Specify common uniforms using UBOs\r\n\r\n// not working :(\r\n// twgl has no support for using the same UBO in multiple shaders\r\n// to get this working, it'd have to be more handmade\r\n// for the moment, forget about it\r\n\r\n//// init\r\nconst canvas = document.querySelector(\"#c\")! as HTMLCanvasElement;\r\n// ensure that we trigger a resize on the first frame\r\ncanvas.width = 1;\r\ncanvas.height = 1;\r\nconst gl = canvas.getContext(\"webgl2\", { alpha: false })!;\r\ngl.enable(gl.BLEND);\r\ngl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\ngl.clearColor(0.5, 0.5, 0.75, 1.0);\r\n\r\nconst sprite_program_info = twgl.createProgramInfo(gl, [sprite_vert_src, sprite_frag_src]);\r\nconst circ_program_info = twgl.createProgramInfo(gl, [circ_vert_src, circ_frag_src]);\r\n\r\nconst buffer_info = twgl.createBufferInfoFromArrays(gl, {\r\n    a_vertex: {\r\n        data: [\r\n            // Triangle for 1,1 corner\r\n            1.0, 1.0,\r\n            0.0, 1.0,\r\n            1.0, 0.0,\r\n            // Triangle for 0,0 corner\r\n            0.0, 0.0,\r\n            1.0, 0.0,\r\n            0.0, 1.0,\r\n        ],\r\n        numComponents: 2,\r\n        // stride, offset, etc. if needed\r\n    },\r\n});\r\n\r\n/**\r\n* Draws the given image\r\n* @param texture texture to draw\r\n* @param x distance in pixels to the left of the screen\r\n* @param y distance in pixels to the top of the screen\r\n* @param w width in pixels\r\n* @param h height in pixels\r\n*/\r\nfunction drawImage(texture: WebGLTexture, x: number, y: number, w: number, h: number) {\r\n    gl.useProgram(sprite_program_info.program);\r\n    twgl.bindUniformBlock(gl, sprite_program_info, common_data_ubo_info);\r\n    twgl.setBuffersAndAttributes(gl, sprite_program_info, buffer_info);\r\n    twgl.setUniforms(sprite_program_info, {\r\n        u_size: [w, h],\r\n        u_position: [x, y],\r\n        u_texture: texture,\r\n    });\r\n    twgl.drawBufferInfo(gl, buffer_info);\r\n}\r\n\r\n/**\r\n* Draws a circle\r\n* @param x distance in pixels to the left of the screen\r\n* @param y distance in pixels to the top of the screen\r\n* @param w width in pixels\r\n* @param h height in pixels\r\n*/\r\nfunction drawCircle(x: number, y: number, w: number, h: number) {\r\n    gl.useProgram(circ_program_info.program);\r\n    twgl.bindUniformBlock(gl, circ_program_info, common_data_ubo_info);\r\n    twgl.setBuffersAndAttributes(gl, circ_program_info, buffer_info);\r\n    twgl.setUniforms(circ_program_info, {\r\n        u_size: [w, h],\r\n        u_position: [x, y],\r\n        u_radius: .25,\r\n    });\r\n    twgl.drawBufferInfo(gl, buffer_info);\r\n}\r\n\r\n// load texture\r\nconst textures = twgl.createTextures(gl, {\r\n    sprite_1: {\r\n        src: (new URL('sprite.png', import.meta.url)).toString(),\r\n        // mag: gl.NEAREST\r\n    },\r\n});\r\n\r\n// UBOs\r\n// full tutorial at https://gist.github.com/jialiang/2880d4cc3364df117320e8cb324c2880\r\n// twgl taken from https://twgljs.org/examples/uniform-buffer-objects.html\r\nconst common_data_ubo_info = twgl.createUniformBlockInfo(gl, circ_program_info, \"CommonData\");\r\n// link the ubo with each program\r\ngl.uniformBlockBinding(sprite_program_info.program,\r\n    gl.getUniformBlockIndex(sprite_program_info.program, \"CommonData\"),\r\n    0 // index of the uniform block\r\n);\r\ngl.uniformBlockBinding(circ_program_info.program,\r\n    gl.getUniformBlockIndex(circ_program_info.program, \"CommonData\"),\r\n    0 // index of the uniform block\r\n);\r\n\r\n// game logic\r\nlet px = 123;\r\nlet py = 234;\r\n\r\nlet last = 0;\r\nfunction update(now) {\r\n    if (twgl.resizeCanvasToDisplaySize(canvas)) {\r\n        // on resize\r\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\r\n\r\n        // Change the global uniform\r\n        twgl.setBlockUniforms(common_data_ubo_info, {\r\n            u_resolution: [gl.canvas.width, gl.canvas.height],\r\n        });\r\n    }\r\n    let delta = now - last;\r\n    last = now;\r\n\r\n    px = (px + delta) % gl.canvas.width;\r\n    py = (py + delta) % gl.canvas.height;\r\n\r\n    //// draw\r\n    gl.clear(gl.COLOR_BUFFER_BIT);\r\n\r\n    drawImage(textures.sprite_1, px, py, 200, 200);\r\n    drawCircle(100, 200, 300, 400);\r\n\r\n    requestAnimationFrame(update);\r\n}\r\n\r\nrequestAnimationFrame(update);\r\n","#version 300 es\r\n\r\n// [0, 1]^2\r\nin vec2 a_vertex;\r\n\r\nuniform CommonData {\r\n    vec2 u_resolution;\r\n};\r\n\r\nuniform vec2 u_position;\r\nuniform vec2 u_size;\r\nout vec2 v_texcoord;\r\n\r\nvoid main() {\r\n    // if size is 100 & screen is 400, then\r\n    // clip space result width will be .5\r\n    vec2 pos = 2.0 * a_vertex * u_size / u_resolution;\r\n\r\n    // if position is 200 & screen is 400, then\r\n    // clip space result offset will be .5\r\n    pos += 2.0 * u_position / u_resolution;\r\n\r\n    // pos of 0 should go to the top left\r\n    pos -= vec2(1, 1);\r\n\r\n    // ypos = down\r\n    pos.y = -pos.y;\r\n\r\n    gl_Position = vec4(pos, 0, 1);\r\n\r\n    v_texcoord = a_vertex;\r\n}\r\n\r\n// todo: investigate glslify","#version 300 es\r\nprecision highp float;\r\n\r\nin vec2 v_texcoord;\r\n\r\n// sprite stuff\r\nuniform sampler2D u_texture;\r\n\r\nout vec4 out_color;\r\n\r\nvoid main() {\r\n    out_color = texture(u_texture, v_texcoord);\r\n}","#version 300 es\r\n\r\n// [0, 1]^2\r\nin vec2 a_vertex;\r\n\r\nuniform CommonData {\r\n    vec2 u_resolution;\r\n};\r\n\r\nuniform vec2 u_position;\r\nuniform vec2 u_size;\r\nout vec2 v_texcoord;\r\n\r\nvoid main() {\r\n    // if size is 100 & screen is 400, then\r\n    // clip space result width will be .5\r\n    vec2 pos = 2.0 * a_vertex * u_size / u_resolution;\r\n\r\n    // if position is 200 & screen is 400, then\r\n    // clip space result offset will be .5\r\n    pos += 2.0 * u_position / u_resolution;\r\n\r\n    // pos of 0 should go to the top left\r\n    pos -= vec2(1, 1);\r\n\r\n    // ypos = down\r\n    pos.y = -pos.y;\r\n\r\n    gl_Position = vec4(pos, 0, 1);\r\n\r\n    v_texcoord = a_vertex;\r\n}\r\n\r\n// todo: investigate glslify","#version 300 es\r\nprecision highp float;\r\n\r\nin vec2 v_texcoord;\r\n\r\n// circ stuff\r\nuniform float u_radius;\r\n\r\nout vec4 out_color;\r\n\r\nvoid main() {\r\n    float distSq = dot(v_texcoord - .5, v_texcoord - .5);\r\n    float alpha = smoothstep(u_radius * u_radius + .01, u_radius * u_radius - .01, distSq);\r\n    out_color = vec4(vec3(distSq), alpha);\r\n}","module.exports = require('./helpers/bundle-url').getBundleURL('jPHNg') + \"../\" + require('./helpers/bundle-manifest').resolve(\"b3TSu\");"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$parcel$interopDefault","a","__esModule","default","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","i","length","resolved","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","value","$7dd1ddf6834435ca$var$getBundleURL","matches","stack","match","replace","JSON","parse","$6MzNI","$ba7b96a2d8ccaf92$exports","$5a748d5495a18343$exports","$a18be831e98105e7$exports","$215f78529ee9cbe6$exports","$b2fabd0de3e83b26$var$canvas","document","querySelector","width","height","$b2fabd0de3e83b26$var$gl","getContext","alpha","enable","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","clearColor","$b2fabd0de3e83b26$var$sprite_program_info","createProgramInfo","$b2fabd0de3e83b26$var$circ_program_info","$b2fabd0de3e83b26$var$buffer_info","createBufferInfoFromArrays","a_vertex","data","numComponents","$58704e561e6d38f8$exports","getBundleURL","resolve","$b2fabd0de3e83b26$var$textures","createTextures","sprite_1","src","URL","toString","$b2fabd0de3e83b26$var$common_data_ubo_info","createUniformBlockInfo","uniformBlockBinding","program","getUniformBlockIndex","$b2fabd0de3e83b26$var$px","$b2fabd0de3e83b26$var$py","$b2fabd0de3e83b26$var$last","requestAnimationFrame","$b2fabd0de3e83b26$var$update","now","texture","x","y","resizeCanvasToDisplaySize","viewport","drawingBufferWidth","drawingBufferHeight","setBlockUniforms","u_resolution","canvas","delta","clear","COLOR_BUFFER_BIT","useProgram","bindUniformBlock","setBuffersAndAttributes","setUniforms","u_size","u_position","u_texture","drawBufferInfo","u_radius"],"version":3,"file":"index.f27226ea.js.map"}