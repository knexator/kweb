{"mappings":"A,S,E,C,C,C,C,C,C,C,E,O,e,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,S,E,C,E,O,G,E,W,E,Q,C,C,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,C,E,E,C,E,E,E,iB,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,Q,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,K,E,Q,E,E,S,E,O,C,I,E,A,M,uB,E,I,O,E,K,mB,C,C,E,S,S,C,C,C,E,C,C,E,C,C,E,E,kB,G,E,S,Q,S,C,C,C,ECAA,a,E,E,Q,W,W,O,C,E,S,C,E,O,E,C,G,E,E,Q,U,W,O,C,E,S,C,E,O,E,C,GAEA,IAcA,EACA,EAfI,EAAU,CAAC,EAcf,EAbA,SAAkB,CAAK,EAErB,IAAK,IADD,EAAO,OAAO,KAAK,GACd,EAAI,EAAG,EAAI,EAAK,OAAQ,IAC/B,CAAO,CAAC,CAAI,CAAC,EAAE,CAAC,CAAG,CAAK,CAAC,CAAI,CAAC,EAAE,CAAC,AAErC,EASA,EARA,SAAiB,CAAE,EACjB,IAAI,EAAW,CAAO,CAAC,EAAG,CAC1B,GAAI,AAAY,MAAZ,EACF,MAAM,AAAI,MAAM,oCAAsC,GAExD,OAAO,CACT,C,GCfA,AAAA,EAAA,SAAA,SAA8C,KAAK,MAAM,+I,I,E,E,S,E,C,EEAzD,EAAe,usB,I,E,C,ECAf,EAAe,iO,I,E,C,ECAf,EAAe,usB,I,E,C,ECAf,EAAe,6WJmBf,MAAM,EAAS,SAAS,cAAc,KAEtC,CAAA,EAAO,MAAQ,EACf,EAAO,OAAS,EAChB,MAAM,EAAK,EAAO,WAAW,SAAU,CAAE,MAAO,CAAA,CAAM,GACtD,EAAG,OAAO,EAAG,OACb,EAAG,UAAU,EAAG,UAAW,EAAG,qBAC9B,EAAG,WAAW,GAAK,GAAK,IAAM,GAE9B,MAAM,EAAsB,EAAA,kBAAuB,EAAI,CAAC,EAAA,GAAiB,EAAA,GAAgB,EACnF,EAAoB,EAAA,kBAAuB,EAAI,CAAC,EAAA,GAAe,EAAA,GAAc,EAE7E,EAAc,EAAA,2BAAgC,EAAI,CACpD,SAAU,CACN,KAAM,CAEF,EAAK,EACL,EAAK,EACL,EAAK,EAEL,EAAK,EACL,EAAK,EACL,EAAK,EACR,CACD,cAAe,CAEnB,CACJ,G,I,E,C,EK9CA,EAAiB,IAAA,IAAoB,MAAQ,AAAA,EAAA,SAAA,QAA6C,SAAA,YAAA,KAAU,WLwFpG,MAAM,EAAW,EAAA,eAAoB,EAAI,CACrC,SAAU,CACN,IAAK,IAAA,IAAA,GAAyC,UAElD,CACJ,GAKM,EAAuB,EAAA,uBAA4B,EAAI,EAAmB,cAEhF,EAAG,oBAAoB,EAAoB,QACvC,EAAG,qBAAqB,EAAoB,QAAS,cACrD,GAEJ,EAAG,oBAAoB,EAAkB,QACrC,EAAG,qBAAqB,EAAkB,QAAS,cACnD,GAIJ,IAAI,EAAK,IACL,EAAK,IAEL,EAAO,EA0BX,sBAzBA,SAAS,EAAO,CAAG,MA1DA,EAAuB,EAAW,EA2D7C,EAAA,0BAA+B,KAE/B,EAAG,SAAS,EAAG,EAAG,EAAG,mBAAoB,EAAG,qBAG5C,EAAA,iBAAsB,EAAsB,CACxC,aAAc,CAAC,EAAG,OAAO,MAAO,EAAG,OAAO,OAAO,AACrD,IAEJ,IAAI,EAAQ,EAAM,EAClB,EAAO,EAEP,EAAM,AAAA,CAAA,EAAK,CAAA,EAAS,EAAG,OAAO,MAC9B,EAAM,AAAA,CAAA,EAAK,CAAA,EAAS,EAAG,OAAO,OAG9B,EAAG,MAAM,EAAG,kBA3EG,EA6EL,EAAS,SA7EmB,EA6ET,EA7EoB,EA6EhB,EA5EjC,EAAG,WAAW,EAAoB,SAClC,EAAA,iBAAsB,EAAI,EAAqB,GAC/C,EAAA,wBAA6B,EAAI,EAAqB,GACtD,EAAA,YAAiB,EAAqB,CAClC,OAAQ,CAwEyB,IAAK,IAxExB,CACd,WAAY,CAAC,EAAG,EAAE,CAClB,UAAW,CACf,GACA,EAAA,eAAoB,EAAI,GAWxB,EAAG,WAAW,EAAkB,SAChC,EAAA,iBAAsB,EAAI,EAAmB,GAC7C,EAAA,wBAA6B,EAAI,EAAmB,GACpD,EAAA,YAAiB,EAAmB,CAChC,OAAQ,CAsDS,IAAK,IAtDR,CACd,WAAY,CAqDL,IAAK,IArDM,CAClB,SAAU,GACd,GACA,EAAA,eAAoB,EAAI,GAoDxB,sBAAsB,EAC1B","sources":["<anon>","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-2ca4d2230cf53091.js","uniformBufferObjects/main.ts","uniformBufferObjects/shaders/sprite.vert","uniformBufferObjects/shaders/sprite.frag","uniformBufferObjects/shaders/circ.vert","uniformBufferObjects/shaders/circ.frag","node_modules/@parcel/runtime-js/lib/runtime-42951a5a75386e0e.js"],"sourcesContent":["function $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\nvar $parcel$global =\ntypeof globalThis !== 'undefined'\n  ? globalThis\n  : typeof self !== 'undefined'\n  ? self\n  : typeof window !== 'undefined'\n  ? window\n  : typeof global !== 'undefined'\n  ? global\n  : {};\nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire94c2\"];\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire94c2\"] = parcelRequire;\n}\nparcelRequire.register(\"kyEFX\", function(module, exports) {\n\n$parcel$export(module.exports, \"register\", function () { return $ef7689007096c8a0$export$6503ec6e8aabbaf; }, function (v) { return $ef7689007096c8a0$export$6503ec6e8aabbaf = v; });\n$parcel$export(module.exports, \"resolve\", function () { return $ef7689007096c8a0$export$f7ad0328861e2f03; }, function (v) { return $ef7689007096c8a0$export$f7ad0328861e2f03 = v; });\nvar $ef7689007096c8a0$export$6503ec6e8aabbaf;\nvar $ef7689007096c8a0$export$f7ad0328861e2f03;\n\"use strict\";\nvar $ef7689007096c8a0$var$mapping = {};\nfunction $ef7689007096c8a0$var$register(pairs) {\n    var keys = Object.keys(pairs);\n    for(var i = 0; i < keys.length; i++)$ef7689007096c8a0$var$mapping[keys[i]] = pairs[keys[i]];\n}\nfunction $ef7689007096c8a0$var$resolve(id) {\n    var resolved = $ef7689007096c8a0$var$mapping[id];\n    if (resolved == null) throw new Error(\"Could not resolve bundle with id \" + id);\n    return resolved;\n}\n$ef7689007096c8a0$export$6503ec6e8aabbaf = $ef7689007096c8a0$var$register;\n$ef7689007096c8a0$export$f7ad0328861e2f03 = $ef7689007096c8a0$var$resolve;\n\n});\n\nvar $19b86e704446558b$exports = {};\n\n(parcelRequire(\"kyEFX\")).register(JSON.parse('{\"dm10R\":\"index.bcccff64.js\",\"9vm6R\":\"sprite.c1d1c491.png\",\"bB1AD\":\"index.9c3702eb.js\"}'));\n\n\nvar $amYBK = parcelRequire(\"amYBK\");\nvar $32019dc551d4c57d$exports = {};\n$32019dc551d4c57d$exports = \"#version 300 es\\n#define GLSLIFY 1\\n\\n// [0, 1]^2\\nin vec2 a_vertex;\\n\\nuniform CommonData {\\n    vec2 u_resolution;\\n};\\n\\nuniform vec2 u_position;\\nuniform vec2 u_size;\\nout vec2 v_texcoord;\\n\\nvoid main() {\\n    // if size is 100 & screen is 400, then\\n    // clip space result width will be .5\\n    vec2 pos = 2.0 * a_vertex * u_size / u_resolution;\\n\\n    // if position is 200 & screen is 400, then\\n    // clip space result offset will be .5\\n    pos += 2.0 * u_position / u_resolution;\\n\\n    // pos of 0 should go to the top left\\n    pos -= vec2(1, 1);\\n\\n    // ypos = down\\n    pos.y = -pos.y;\\n\\n    gl_Position = vec4(pos, 0, 1);\\n\\n    v_texcoord = a_vertex;\\n}\\n\\n// todo: investigate glslify\";\n\n\nvar $72bc3907cdd46239$exports = {};\n$72bc3907cdd46239$exports = \"#version 300 es\\nprecision highp float;\\n#define GLSLIFY 1\\n\\nin vec2 v_texcoord;\\n\\n// sprite stuff\\nuniform sampler2D u_texture;\\n\\nout vec4 out_color;\\n\\nvoid main() {\\n    out_color = texture(u_texture, v_texcoord);\\n}\";\n\n\nvar $e08d333b7fee77ce$exports = {};\n$e08d333b7fee77ce$exports = \"#version 300 es\\n#define GLSLIFY 1\\n\\n// [0, 1]^2\\nin vec2 a_vertex;\\n\\nuniform CommonData {\\n    vec2 u_resolution;\\n};\\n\\nuniform vec2 u_position;\\nuniform vec2 u_size;\\nout vec2 v_texcoord;\\n\\nvoid main() {\\n    // if size is 100 & screen is 400, then\\n    // clip space result width will be .5\\n    vec2 pos = 2.0 * a_vertex * u_size / u_resolution;\\n\\n    // if position is 200 & screen is 400, then\\n    // clip space result offset will be .5\\n    pos += 2.0 * u_position / u_resolution;\\n\\n    // pos of 0 should go to the top left\\n    pos -= vec2(1, 1);\\n\\n    // ypos = down\\n    pos.y = -pos.y;\\n\\n    gl_Position = vec4(pos, 0, 1);\\n\\n    v_texcoord = a_vertex;\\n}\\n\\n// todo: investigate glslify\";\n\n\nvar $1d0f069dc20505ba$exports = {};\n$1d0f069dc20505ba$exports = \"#version 300 es\\nprecision highp float;\\n#define GLSLIFY 1\\n\\nin vec2 v_texcoord;\\n\\n// circ stuff\\nuniform float u_radius;\\n\\nout vec4 out_color;\\n\\nvoid main() {\\n    float distSq = dot(v_texcoord - .5, v_texcoord - .5);\\n    float alpha = smoothstep(u_radius * u_radius + .01, u_radius * u_radius - .01, distSq);\\n    out_color = vec4(vec3(distSq), alpha);\\n}\";\n\n\n// Specify common uniforms using UBOs\n// not working :(\n// twgl has no support for using the same UBO in multiple shaders\n// to get this working, it'd have to be more handmade\n// for the moment, forget about it\n//// init\nconst $953f8383addf2d0c$var$canvas = document.querySelector(\"#c\");\n// ensure that we trigger a resize on the first frame\n$953f8383addf2d0c$var$canvas.width = 1;\n$953f8383addf2d0c$var$canvas.height = 1;\nconst $953f8383addf2d0c$var$gl = $953f8383addf2d0c$var$canvas.getContext(\"webgl2\", {\n    alpha: false\n});\n$953f8383addf2d0c$var$gl.enable($953f8383addf2d0c$var$gl.BLEND);\n$953f8383addf2d0c$var$gl.blendFunc($953f8383addf2d0c$var$gl.SRC_ALPHA, $953f8383addf2d0c$var$gl.ONE_MINUS_SRC_ALPHA);\n$953f8383addf2d0c$var$gl.clearColor(0.5, 0.5, 0.75, 1.0);\nconst $953f8383addf2d0c$var$sprite_program_info = $amYBK.createProgramInfo($953f8383addf2d0c$var$gl, [\n    (0, (/*@__PURE__*/$parcel$interopDefault($32019dc551d4c57d$exports))),\n    (0, (/*@__PURE__*/$parcel$interopDefault($72bc3907cdd46239$exports)))\n]);\nconst $953f8383addf2d0c$var$circ_program_info = $amYBK.createProgramInfo($953f8383addf2d0c$var$gl, [\n    (0, (/*@__PURE__*/$parcel$interopDefault($e08d333b7fee77ce$exports))),\n    (0, (/*@__PURE__*/$parcel$interopDefault($1d0f069dc20505ba$exports)))\n]);\nconst $953f8383addf2d0c$var$buffer_info = $amYBK.createBufferInfoFromArrays($953f8383addf2d0c$var$gl, {\n    a_vertex: {\n        data: [\n            // Triangle for 1,1 corner\n            1.0,\n            1.0,\n            0.0,\n            1.0,\n            1.0,\n            0.0,\n            // Triangle for 0,0 corner\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            1.0\n        ],\n        numComponents: 2\n    }\n});\n/**\r\n* Draws the given image\r\n* @param texture texture to draw\r\n* @param x distance in pixels to the left of the screen\r\n* @param y distance in pixels to the top of the screen\r\n* @param w width in pixels\r\n* @param h height in pixels\r\n*/ function $953f8383addf2d0c$var$drawImage(texture, x, y, w, h) {\n    $953f8383addf2d0c$var$gl.useProgram($953f8383addf2d0c$var$sprite_program_info.program);\n    $amYBK.bindUniformBlock($953f8383addf2d0c$var$gl, $953f8383addf2d0c$var$sprite_program_info, $953f8383addf2d0c$var$common_data_ubo_info);\n    $amYBK.setBuffersAndAttributes($953f8383addf2d0c$var$gl, $953f8383addf2d0c$var$sprite_program_info, $953f8383addf2d0c$var$buffer_info);\n    $amYBK.setUniforms($953f8383addf2d0c$var$sprite_program_info, {\n        u_size: [\n            w,\n            h\n        ],\n        u_position: [\n            x,\n            y\n        ],\n        u_texture: texture\n    });\n    $amYBK.drawBufferInfo($953f8383addf2d0c$var$gl, $953f8383addf2d0c$var$buffer_info);\n}\n/**\r\n* Draws a circle\r\n* @param x distance in pixels to the left of the screen\r\n* @param y distance in pixels to the top of the screen\r\n* @param w width in pixels\r\n* @param h height in pixels\r\n*/ function $953f8383addf2d0c$var$drawCircle(x, y, w, h) {\n    $953f8383addf2d0c$var$gl.useProgram($953f8383addf2d0c$var$circ_program_info.program);\n    $amYBK.bindUniformBlock($953f8383addf2d0c$var$gl, $953f8383addf2d0c$var$circ_program_info, $953f8383addf2d0c$var$common_data_ubo_info);\n    $amYBK.setBuffersAndAttributes($953f8383addf2d0c$var$gl, $953f8383addf2d0c$var$circ_program_info, $953f8383addf2d0c$var$buffer_info);\n    $amYBK.setUniforms($953f8383addf2d0c$var$circ_program_info, {\n        u_size: [\n            w,\n            h\n        ],\n        u_position: [\n            x,\n            y\n        ],\n        u_radius: .25\n    });\n    $amYBK.drawBufferInfo($953f8383addf2d0c$var$gl, $953f8383addf2d0c$var$buffer_info);\n}\nvar $5c64c013fdf0d557$exports = {};\n\n$5c64c013fdf0d557$exports = new URL(\"../\" + (parcelRequire(\"kyEFX\")).resolve(\"9vm6R\"), import.meta.url).toString();\n\n\n// load texture\nconst $953f8383addf2d0c$var$textures = $amYBK.createTextures($953f8383addf2d0c$var$gl, {\n    sprite_1: {\n        src: new URL($5c64c013fdf0d557$exports).toString()\n    }\n});\n// UBOs\n// full tutorial at https://gist.github.com/jialiang/2880d4cc3364df117320e8cb324c2880\n// twgl taken from https://twgljs.org/examples/uniform-buffer-objects.html\nconst $953f8383addf2d0c$var$common_data_ubo_info = $amYBK.createUniformBlockInfo($953f8383addf2d0c$var$gl, $953f8383addf2d0c$var$circ_program_info, \"CommonData\");\n// link the ubo with each program\n$953f8383addf2d0c$var$gl.uniformBlockBinding($953f8383addf2d0c$var$sprite_program_info.program, $953f8383addf2d0c$var$gl.getUniformBlockIndex($953f8383addf2d0c$var$sprite_program_info.program, \"CommonData\"), 0 // index of the uniform block\n);\n$953f8383addf2d0c$var$gl.uniformBlockBinding($953f8383addf2d0c$var$circ_program_info.program, $953f8383addf2d0c$var$gl.getUniformBlockIndex($953f8383addf2d0c$var$circ_program_info.program, \"CommonData\"), 0 // index of the uniform block\n);\n// game logic\nlet $953f8383addf2d0c$var$px = 123;\nlet $953f8383addf2d0c$var$py = 234;\nlet $953f8383addf2d0c$var$last = 0;\nfunction $953f8383addf2d0c$var$update(now) {\n    if ($amYBK.resizeCanvasToDisplaySize($953f8383addf2d0c$var$canvas)) {\n        // on resize\n        $953f8383addf2d0c$var$gl.viewport(0, 0, $953f8383addf2d0c$var$gl.drawingBufferWidth, $953f8383addf2d0c$var$gl.drawingBufferHeight);\n        // Change the global uniform\n        $amYBK.setBlockUniforms($953f8383addf2d0c$var$common_data_ubo_info, {\n            u_resolution: [\n                $953f8383addf2d0c$var$gl.canvas.width,\n                $953f8383addf2d0c$var$gl.canvas.height\n            ]\n        });\n    }\n    let delta = now - $953f8383addf2d0c$var$last;\n    $953f8383addf2d0c$var$last = now;\n    $953f8383addf2d0c$var$px = ($953f8383addf2d0c$var$px + delta) % $953f8383addf2d0c$var$gl.canvas.width;\n    $953f8383addf2d0c$var$py = ($953f8383addf2d0c$var$py + delta) % $953f8383addf2d0c$var$gl.canvas.height;\n    //// draw\n    $953f8383addf2d0c$var$gl.clear($953f8383addf2d0c$var$gl.COLOR_BUFFER_BIT);\n    $953f8383addf2d0c$var$drawImage($953f8383addf2d0c$var$textures.sprite_1, $953f8383addf2d0c$var$px, $953f8383addf2d0c$var$py, 200, 200);\n    $953f8383addf2d0c$var$drawCircle(100, 200, 300, 400);\n    requestAnimationFrame($953f8383addf2d0c$var$update);\n}\nrequestAnimationFrame($953f8383addf2d0c$var$update);\n\n\n//# sourceMappingURL=index.bcccff64.js.map\n","\"use strict\";\n\nvar mapping = {};\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\nfunction resolve(id) {\n  var resolved = mapping[id];\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n  return resolved;\n}\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"dm10R\\\":\\\"index.bcccff64.js\\\",\\\"9vm6R\\\":\\\"sprite.c1d1c491.png\\\",\\\"bB1AD\\\":\\\"index.9c3702eb.js\\\"}\"));","import * as twgl from \"twgl.js\"\r\n\r\n// @ts-ignore\r\nimport sprite_vert_src from \"./shaders/sprite.vert\";\r\n// @ts-ignore\r\nimport sprite_frag_src from \"./shaders/sprite.frag\";\r\n// @ts-ignore\r\nimport circ_vert_src from \"./shaders/circ.vert\";\r\n// @ts-ignore\r\nimport circ_frag_src from \"./shaders/circ.frag\";\r\n\r\n// Specify common uniforms using UBOs\r\n\r\n// not working :(\r\n// twgl has no support for using the same UBO in multiple shaders\r\n// to get this working, it'd have to be more handmade\r\n// for the moment, forget about it\r\n\r\n//// init\r\nconst canvas = document.querySelector(\"#c\")! as HTMLCanvasElement;\r\n// ensure that we trigger a resize on the first frame\r\ncanvas.width = 1;\r\ncanvas.height = 1;\r\nconst gl = canvas.getContext(\"webgl2\", { alpha: false })!;\r\ngl.enable(gl.BLEND);\r\ngl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\ngl.clearColor(0.5, 0.5, 0.75, 1.0);\r\n\r\nconst sprite_program_info = twgl.createProgramInfo(gl, [sprite_vert_src, sprite_frag_src]);\r\nconst circ_program_info = twgl.createProgramInfo(gl, [circ_vert_src, circ_frag_src]);\r\n\r\nconst buffer_info = twgl.createBufferInfoFromArrays(gl, {\r\n    a_vertex: {\r\n        data: [\r\n            // Triangle for 1,1 corner\r\n            1.0, 1.0,\r\n            0.0, 1.0,\r\n            1.0, 0.0,\r\n            // Triangle for 0,0 corner\r\n            0.0, 0.0,\r\n            1.0, 0.0,\r\n            0.0, 1.0,\r\n        ],\r\n        numComponents: 2,\r\n        // stride, offset, etc. if needed\r\n    },\r\n});\r\n\r\n/**\r\n* Draws the given image\r\n* @param texture texture to draw\r\n* @param x distance in pixels to the left of the screen\r\n* @param y distance in pixels to the top of the screen\r\n* @param w width in pixels\r\n* @param h height in pixels\r\n*/\r\nfunction drawImage(texture: WebGLTexture, x: number, y: number, w: number, h: number) {\r\n    gl.useProgram(sprite_program_info.program);\r\n    twgl.bindUniformBlock(gl, sprite_program_info, common_data_ubo_info);\r\n    twgl.setBuffersAndAttributes(gl, sprite_program_info, buffer_info);\r\n    twgl.setUniforms(sprite_program_info, {\r\n        u_size: [w, h],\r\n        u_position: [x, y],\r\n        u_texture: texture,\r\n    });\r\n    twgl.drawBufferInfo(gl, buffer_info);\r\n}\r\n\r\n/**\r\n* Draws a circle\r\n* @param x distance in pixels to the left of the screen\r\n* @param y distance in pixels to the top of the screen\r\n* @param w width in pixels\r\n* @param h height in pixels\r\n*/\r\nfunction drawCircle(x: number, y: number, w: number, h: number) {\r\n    gl.useProgram(circ_program_info.program);\r\n    twgl.bindUniformBlock(gl, circ_program_info, common_data_ubo_info);\r\n    twgl.setBuffersAndAttributes(gl, circ_program_info, buffer_info);\r\n    twgl.setUniforms(circ_program_info, {\r\n        u_size: [w, h],\r\n        u_position: [x, y],\r\n        u_radius: .25,\r\n    });\r\n    twgl.drawBufferInfo(gl, buffer_info);\r\n}\r\n\r\n// load texture\r\nconst textures = twgl.createTextures(gl, {\r\n    sprite_1: {\r\n        src: (new URL('sprite.png', import.meta.url)).toString(),\r\n        // mag: gl.NEAREST\r\n    },\r\n});\r\n\r\n// UBOs\r\n// full tutorial at https://gist.github.com/jialiang/2880d4cc3364df117320e8cb324c2880\r\n// twgl taken from https://twgljs.org/examples/uniform-buffer-objects.html\r\nconst common_data_ubo_info = twgl.createUniformBlockInfo(gl, circ_program_info, \"CommonData\");\r\n// link the ubo with each program\r\ngl.uniformBlockBinding(sprite_program_info.program,\r\n    gl.getUniformBlockIndex(sprite_program_info.program, \"CommonData\"),\r\n    0 // index of the uniform block\r\n);\r\ngl.uniformBlockBinding(circ_program_info.program,\r\n    gl.getUniformBlockIndex(circ_program_info.program, \"CommonData\"),\r\n    0 // index of the uniform block\r\n);\r\n\r\n// game logic\r\nlet px = 123;\r\nlet py = 234;\r\n\r\nlet last = 0;\r\nfunction update(now) {\r\n    if (twgl.resizeCanvasToDisplaySize(canvas)) {\r\n        // on resize\r\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\r\n\r\n        // Change the global uniform\r\n        twgl.setBlockUniforms(common_data_ubo_info, {\r\n            u_resolution: [gl.canvas.width, gl.canvas.height],\r\n        });\r\n    }\r\n    let delta = now - last;\r\n    last = now;\r\n\r\n    px = (px + delta) % gl.canvas.width;\r\n    py = (py + delta) % gl.canvas.height;\r\n\r\n    //// draw\r\n    gl.clear(gl.COLOR_BUFFER_BIT);\r\n\r\n    drawImage(textures.sprite_1, px, py, 200, 200);\r\n    drawCircle(100, 200, 300, 400);\r\n\r\n    requestAnimationFrame(update);\r\n}\r\n\r\nrequestAnimationFrame(update);\r\n","#version 300 es\r\n\r\n// [0, 1]^2\r\nin vec2 a_vertex;\r\n\r\nuniform CommonData {\r\n    vec2 u_resolution;\r\n};\r\n\r\nuniform vec2 u_position;\r\nuniform vec2 u_size;\r\nout vec2 v_texcoord;\r\n\r\nvoid main() {\r\n    // if size is 100 & screen is 400, then\r\n    // clip space result width will be .5\r\n    vec2 pos = 2.0 * a_vertex * u_size / u_resolution;\r\n\r\n    // if position is 200 & screen is 400, then\r\n    // clip space result offset will be .5\r\n    pos += 2.0 * u_position / u_resolution;\r\n\r\n    // pos of 0 should go to the top left\r\n    pos -= vec2(1, 1);\r\n\r\n    // ypos = down\r\n    pos.y = -pos.y;\r\n\r\n    gl_Position = vec4(pos, 0, 1);\r\n\r\n    v_texcoord = a_vertex;\r\n}\r\n\r\n// todo: investigate glslify","#version 300 es\r\nprecision highp float;\r\n\r\nin vec2 v_texcoord;\r\n\r\n// sprite stuff\r\nuniform sampler2D u_texture;\r\n\r\nout vec4 out_color;\r\n\r\nvoid main() {\r\n    out_color = texture(u_texture, v_texcoord);\r\n}","#version 300 es\r\n\r\n// [0, 1]^2\r\nin vec2 a_vertex;\r\n\r\nuniform CommonData {\r\n    vec2 u_resolution;\r\n};\r\n\r\nuniform vec2 u_position;\r\nuniform vec2 u_size;\r\nout vec2 v_texcoord;\r\n\r\nvoid main() {\r\n    // if size is 100 & screen is 400, then\r\n    // clip space result width will be .5\r\n    vec2 pos = 2.0 * a_vertex * u_size / u_resolution;\r\n\r\n    // if position is 200 & screen is 400, then\r\n    // clip space result offset will be .5\r\n    pos += 2.0 * u_position / u_resolution;\r\n\r\n    // pos of 0 should go to the top left\r\n    pos -= vec2(1, 1);\r\n\r\n    // ypos = down\r\n    pos.y = -pos.y;\r\n\r\n    gl_Position = vec4(pos, 0, 1);\r\n\r\n    v_texcoord = a_vertex;\r\n}\r\n\r\n// todo: investigate glslify","#version 300 es\r\nprecision highp float;\r\n\r\nin vec2 v_texcoord;\r\n\r\n// circ stuff\r\nuniform float u_radius;\r\n\r\nout vec4 out_color;\r\n\r\nvoid main() {\r\n    float distSq = dot(v_texcoord - .5, v_texcoord - .5);\r\n    float alpha = smoothstep(u_radius * u_radius + .01, u_radius * u_radius - .01, distSq);\r\n    out_color = vec4(vec3(distSq), alpha);\r\n}","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"9vm6R\")).toString();"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$parcel$interopDefault","a","__esModule","default","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","i","length","resolved","JSON","parse","$amYBK","$32019dc551d4c57d$exports","$72bc3907cdd46239$exports","$e08d333b7fee77ce$exports","$1d0f069dc20505ba$exports","$953f8383addf2d0c$var$canvas","document","querySelector","width","height","$953f8383addf2d0c$var$gl","getContext","alpha","enable","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","clearColor","$953f8383addf2d0c$var$sprite_program_info","createProgramInfo","$953f8383addf2d0c$var$circ_program_info","$953f8383addf2d0c$var$buffer_info","createBufferInfoFromArrays","a_vertex","data","numComponents","$5c64c013fdf0d557$exports","URL","resolve","url","toString","$953f8383addf2d0c$var$textures","createTextures","sprite_1","src","$953f8383addf2d0c$var$common_data_ubo_info","createUniformBlockInfo","uniformBlockBinding","program","getUniformBlockIndex","$953f8383addf2d0c$var$px","$953f8383addf2d0c$var$py","$953f8383addf2d0c$var$last","requestAnimationFrame","$953f8383addf2d0c$var$update","now","texture","x","y","resizeCanvasToDisplaySize","viewport","drawingBufferWidth","drawingBufferHeight","setBlockUniforms","u_resolution","canvas","delta","clear","COLOR_BUFFER_BIT","useProgram","bindUniformBlock","setBuffersAndAttributes","setUniforms","u_size","u_position","u_texture","drawBufferInfo","u_radius"],"version":3,"file":"index.bcccff64.js.map"}