{"mappings":"A,S,E,C,C,C,C,C,C,C,E,O,e,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,C,E,E,C,E,E,E,iB,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,Q,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,K,E,Q,E,E,S,E,O,C,I,E,A,M,uB,E,I,O,E,K,mB,C,C,E,S,S,C,C,C,E,C,C,E,C,C,E,E,kB,G,E,S,Q,S,C,C,C,ECAA,a,E,E,Q,W,W,O,C,E,S,C,E,O,E,C,G,E,E,Q,U,W,O,C,E,S,C,E,O,E,C,GAEA,IAcA,EACA,EAfI,EAAU,CAAC,EAcf,EAbA,SAAkB,CAAK,EAErB,IAAK,IADD,EAAO,OAAO,KAAK,GACd,EAAI,EAAG,EAAI,EAAK,OAAQ,IAC/B,CAAO,CAAC,CAAI,CAAC,EAAE,CAAC,CAAG,CAAK,CAAC,CAAI,CAAC,EAAE,CAAC,AAErC,EASA,EARA,SAAiB,CAAE,EACjB,IAAI,EAAW,CAAO,CAAC,EAAG,CAC1B,GAAI,AAAY,MAAZ,EACF,MAAM,AAAI,MAAM,oCAAsC,GAExD,OAAO,CACT,C,GCfA,AAAA,EAAA,SAAA,SAA8C,KAAK,MAAM,+I,I,E,E,SCKrD,EAAQ,GAAI,CAAA,A,S,C,E,O,G,E,W,E,Q,C,ECJqE,AAAwE,WAAW,IAAI,EAAE,WAAW,SAAS,EAAE,CAAC,EAAuB,OAArB,EAAE,YAAY,EAAE,KAAY,CAAC,CAAC,SAAS,EAAE,CAAC,EAAE,IAAI,IAAI,EAAE,EAAE,EAAE,EAAE,SAAS,OAAO,IAAI,EAAE,QAAQ,CAAC,EAAE,CAAC,MAAM,QAAQ,IAAI,EAAE,QAAQ,OAAO,EAAE,CAAC,CAAC,IAAI,EAAE,EAAE,EAAE,SAAS,cAAc,MAAO,CAAA,EAAE,MAAM,QAAQ,uEAAuE,EAAE,iBAAiB,QAAQ,SAAS,CAAC,EAAE,EAAE,iBACpf,EAAE,EAAE,EAAE,EAAE,SAAS,OAAO,EAAE,CAAC,GAAG,IAAI,EAAG,AAAA,CAAA,aAAa,IAAA,EAAM,MAAM,EAAE,EAAE,EAA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","sources":["<anon>","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-f2a3a226fa05aba4.js","instancing/main.ts","node_modules/stats.js/build/stats.min.js","node_modules/@parcel/runtime-js/lib/runtime-0d7af26b061184e0.js"],"sourcesContent":["function $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\nvar $parcel$global =\ntypeof globalThis !== 'undefined'\n  ? globalThis\n  : typeof self !== 'undefined'\n  ? self\n  : typeof window !== 'undefined'\n  ? window\n  : typeof global !== 'undefined'\n  ? global\n  : {};\nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire94c2\"];\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire94c2\"] = parcelRequire;\n}\nparcelRequire.register(\"kyEFX\", function(module, exports) {\n\n$parcel$export(module.exports, \"register\", function () { return $ef7689007096c8a0$export$6503ec6e8aabbaf; }, function (v) { return $ef7689007096c8a0$export$6503ec6e8aabbaf = v; });\n$parcel$export(module.exports, \"resolve\", function () { return $ef7689007096c8a0$export$f7ad0328861e2f03; }, function (v) { return $ef7689007096c8a0$export$f7ad0328861e2f03 = v; });\nvar $ef7689007096c8a0$export$6503ec6e8aabbaf;\nvar $ef7689007096c8a0$export$f7ad0328861e2f03;\n\"use strict\";\nvar $ef7689007096c8a0$var$mapping = {};\nfunction $ef7689007096c8a0$var$register(pairs) {\n    var keys = Object.keys(pairs);\n    for(var i = 0; i < keys.length; i++)$ef7689007096c8a0$var$mapping[keys[i]] = pairs[keys[i]];\n}\nfunction $ef7689007096c8a0$var$resolve(id) {\n    var resolved = $ef7689007096c8a0$var$mapping[id];\n    if (resolved == null) throw new Error(\"Could not resolve bundle with id \" + id);\n    return resolved;\n}\n$ef7689007096c8a0$export$6503ec6e8aabbaf = $ef7689007096c8a0$var$register;\n$ef7689007096c8a0$export$f7ad0328861e2f03 = $ef7689007096c8a0$var$resolve;\n\n});\n\nvar $57f59bc46d3c67ca$exports = {};\n\n(parcelRequire(\"kyEFX\")).register(JSON.parse('{\"hzugU\":\"index.97750a8f.js\",\"8oBKS\":\"sprite.c1d1c491.png\",\"2yR5D\":\"index.9ef1ce9c.js\"}'));\n\n\nvar $amYBK = parcelRequire(\"amYBK\");\nvar $235ad9148dc5f640$exports = {};\n// stats.js - http://github.com/mrdoob/stats.js\n(function(f, e) {\n    $235ad9148dc5f640$exports = e();\n})($235ad9148dc5f640$exports, function() {\n    var f = function() {\n        function e(a) {\n            c.appendChild(a.dom);\n            return a;\n        }\n        function u(a) {\n            for(var d = 0; d < c.children.length; d++)c.children[d].style.display = d === a ? \"block\" : \"none\";\n            l = a;\n        }\n        var l = 0, c = document.createElement(\"div\");\n        c.style.cssText = \"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";\n        c.addEventListener(\"click\", function(a) {\n            a.preventDefault();\n            u(++l % c.children.length);\n        }, !1);\n        var k = (performance || Date).now(), g = k, a = 0, r = e(new f.Panel(\"FPS\", \"#0ff\", \"#002\")), h = e(new f.Panel(\"MS\", \"#0f0\", \"#020\"));\n        if (self.performance && self.performance.memory) var t = e(new f.Panel(\"MB\", \"#f08\", \"#201\"));\n        u(0);\n        return {\n            REVISION: 16,\n            dom: c,\n            addPanel: e,\n            showPanel: u,\n            begin: function() {\n                k = (performance || Date).now();\n            },\n            end: function() {\n                a++;\n                var c = (performance || Date).now();\n                h.update(c - k, 200);\n                if (c > g + 1E3 && (r.update(1E3 * a / (c - g), 100), g = c, a = 0, t)) {\n                    var d = performance.memory;\n                    t.update(d.usedJSHeapSize / 1048576, d.jsHeapSizeLimit / 1048576);\n                }\n                return c;\n            },\n            update: function() {\n                k = this.end();\n            },\n            domElement: c,\n            setMode: u\n        };\n    };\n    f.Panel = function(e, f, l) {\n        var c = Infinity, k = 0, g = Math.round, a = g(window.devicePixelRatio || 1), r = 80 * a, h = 48 * a, t = 3 * a, v = 2 * a, d = 3 * a, m = 15 * a, n = 74 * a, p = 30 * a, q = document.createElement(\"canvas\");\n        q.width = r;\n        q.height = h;\n        q.style.cssText = \"width:80px;height:48px\";\n        var b = q.getContext(\"2d\");\n        b.font = \"bold \" + 9 * a + \"px Helvetica,Arial,sans-serif\";\n        b.textBaseline = \"top\";\n        b.fillStyle = l;\n        b.fillRect(0, 0, r, h);\n        b.fillStyle = f;\n        b.fillText(e, t, v);\n        b.fillRect(d, m, n, p);\n        b.fillStyle = l;\n        b.globalAlpha = .9;\n        b.fillRect(d, m, n, p);\n        return {\n            dom: q,\n            update: function(h, w) {\n                c = Math.min(c, h);\n                k = Math.max(k, h);\n                b.fillStyle = l;\n                b.globalAlpha = 1;\n                b.fillRect(0, 0, r, m);\n                b.fillStyle = f;\n                b.fillText(g(h) + \" \" + e + \" (\" + g(c) + \"-\" + g(k) + \")\", t, v);\n                b.drawImage(q, d + a, m, n - a, p, d, m, n - a, p);\n                b.fillRect(d + n - a, m, a, p);\n                b.fillStyle = l;\n                b.globalAlpha = .9;\n                b.fillRect(d + n - a, m, a, g((1 - h / w) * p));\n            }\n        };\n    };\n    return f;\n});\n\n\n// stats();\nvar $6746555fb9e221f4$var$stats = new (0, (/*@__PURE__*/$parcel$interopDefault($235ad9148dc5f640$exports)))();\n$6746555fb9e221f4$var$stats.showPanel(0);\ndocument.body.appendChild($6746555fb9e221f4$var$stats.dom);\n// Most of the code is the same as drawSprite\n//// init\nconst $6746555fb9e221f4$var$canvas = document.querySelector(\"#c\");\n// ensure that we trigger a resize on the first frame\n$6746555fb9e221f4$var$canvas.width = 1;\n$6746555fb9e221f4$var$canvas.height = 1;\nconst $6746555fb9e221f4$var$gl = $6746555fb9e221f4$var$canvas.getContext(\"webgl2\");\n$6746555fb9e221f4$var$gl.clearColor(0.5, 0.5, 0.75, 1.0);\nconst $6746555fb9e221f4$var$sprite_program_info = $amYBK.createProgramInfo($6746555fb9e221f4$var$gl, [\n    // vs\n    `#version 300 es\r\n    \r\n    uniform vec2 u_resolution;\r\n    \r\n    // [0, 1]^2\r\n    in vec2 a_vertex;\r\n\r\n    // instancing\r\n    in vec2 i_position;\r\n    in vec2 i_size;\r\n\r\n    out vec2 v_texcoord;\r\n\r\n    void main() {\r\n        // if size is 100 & screen is 400, then\r\n        // clip space result width will be .5\r\n        vec2 pos = 2.0 * a_vertex * i_size / u_resolution;\r\n\r\n        // if position is 200 & screen is 400, then\r\n        // clip space result offset will be .5\r\n        pos += 2.0 * i_position / u_resolution;\r\n\r\n        // pos of 0 should go to the top left\r\n        pos -= vec2(1, 1);\r\n\r\n        // ypos = down\r\n        pos.y = -pos.y;\r\n\r\n        gl_Position = vec4(pos, 0, 1);\r\n\r\n        v_texcoord = a_vertex;\r\n    }\r\n    `,\n    // fs\n    `#version 300 es\r\n    precision highp float;\r\n\r\n    in vec2 v_texcoord;\r\n\r\n    uniform sampler2D u_texture;\r\n    \r\n    out vec4 out_color;\r\n\r\n    void main() {\r\n        out_color = texture(u_texture, v_texcoord);\r\n    }\r\n    `\n]);\n// game logic\nconst $6746555fb9e221f4$var$numInstances = 1000;\nlet $6746555fb9e221f4$var$positions = new Float32Array($6746555fb9e221f4$var$numInstances * 2);\nfor(let k = 0; k < $6746555fb9e221f4$var$numInstances; k++){\n    $6746555fb9e221f4$var$positions[k * 2 + 0] = Math.random() * 1000;\n    $6746555fb9e221f4$var$positions[k * 2 + 1] = Math.random() * 1000;\n}\nlet $6746555fb9e221f4$var$sizes = new Float32Array($6746555fb9e221f4$var$numInstances * 2);\nfor(let k = 0; k < $6746555fb9e221f4$var$numInstances; k++){\n    $6746555fb9e221f4$var$sizes[k * 2 + 0] = 100 + Math.random() * 50;\n    $6746555fb9e221f4$var$sizes[k * 2 + 1] = 100 + Math.random() * 50;\n}\nconst $6746555fb9e221f4$var$buffer_info = $amYBK.createBufferInfoFromArrays($6746555fb9e221f4$var$gl, {\n    a_vertex: {\n        data: [\n            // Triangle for 1,1 corner\n            1.0,\n            1.0,\n            0.0,\n            1.0,\n            1.0,\n            0.0,\n            // Triangle for 0,0 corner\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            1.0\n        ],\n        numComponents: 2\n    },\n    i_position: {\n        data: $6746555fb9e221f4$var$positions,\n        numComponents: 2,\n        divisor: 1,\n        drawType: $6746555fb9e221f4$var$gl.DYNAMIC_DRAW\n    },\n    i_size: {\n        data: $6746555fb9e221f4$var$sizes,\n        numComponents: 2,\n        divisor: 1,\n        drawType: $6746555fb9e221f4$var$gl.STATIC_DRAW\n    }\n});\nvar $df69dc2948a7cce5$exports = {};\n\n$df69dc2948a7cce5$exports = new URL(\"../\" + (parcelRequire(\"kyEFX\")).resolve(\"8oBKS\"), import.meta.url).toString();\n\n\n// load texture\nconst $6746555fb9e221f4$var$textures = $amYBK.createTextures($6746555fb9e221f4$var$gl, {\n    sprite_1: {\n        src: new URL($df69dc2948a7cce5$exports).toString()\n    }\n});\nlet $6746555fb9e221f4$var$last = 0;\nfunction $6746555fb9e221f4$var$update(now) {\n    $6746555fb9e221f4$var$stats.begin();\n    if ($amYBK.resizeCanvasToDisplaySize($6746555fb9e221f4$var$canvas)) {\n        // on resize\n        $6746555fb9e221f4$var$gl.viewport(0, 0, $6746555fb9e221f4$var$gl.drawingBufferWidth, $6746555fb9e221f4$var$gl.drawingBufferHeight);\n        $6746555fb9e221f4$var$gl.useProgram($6746555fb9e221f4$var$sprite_program_info.program);\n        $amYBK.setUniforms($6746555fb9e221f4$var$sprite_program_info, {\n            u_resolution: [\n                $6746555fb9e221f4$var$gl.canvas.width,\n                $6746555fb9e221f4$var$gl.canvas.height\n            ]\n        });\n    }\n    let delta = now - $6746555fb9e221f4$var$last;\n    $6746555fb9e221f4$var$last = now;\n    for(let k = 0; k < $6746555fb9e221f4$var$numInstances; k++){\n        let x = $6746555fb9e221f4$var$positions[k * 2 + 0];\n        let y = $6746555fb9e221f4$var$positions[k * 2 + 1];\n        $6746555fb9e221f4$var$positions[k * 2 + 0] = (x + delta) % $6746555fb9e221f4$var$gl.canvas.width;\n        $6746555fb9e221f4$var$positions[k * 2 + 1] = (y + delta) % $6746555fb9e221f4$var$gl.canvas.height;\n    }\n    //// draw\n    $6746555fb9e221f4$var$gl.clear($6746555fb9e221f4$var$gl.COLOR_BUFFER_BIT);\n    $amYBK.setAttribInfoBufferFromArray($6746555fb9e221f4$var$gl, $6746555fb9e221f4$var$buffer_info.attribs.i_position, $6746555fb9e221f4$var$positions);\n    $6746555fb9e221f4$var$gl.useProgram($6746555fb9e221f4$var$sprite_program_info.program);\n    $amYBK.setBuffersAndAttributes($6746555fb9e221f4$var$gl, $6746555fb9e221f4$var$sprite_program_info, $6746555fb9e221f4$var$buffer_info);\n    $amYBK.setUniforms($6746555fb9e221f4$var$sprite_program_info, {\n        u_texture: $6746555fb9e221f4$var$textures.sprite_1,\n        u_resolution: [\n            $6746555fb9e221f4$var$gl.canvas.width,\n            $6746555fb9e221f4$var$gl.canvas.height\n        ]\n    });\n    $amYBK.drawBufferInfo($6746555fb9e221f4$var$gl, $6746555fb9e221f4$var$buffer_info, $6746555fb9e221f4$var$gl.TRIANGLES, $6746555fb9e221f4$var$buffer_info.numElements, 0, $6746555fb9e221f4$var$numInstances);\n    $6746555fb9e221f4$var$stats.end();\n    requestAnimationFrame($6746555fb9e221f4$var$update);\n}\nrequestAnimationFrame($6746555fb9e221f4$var$update);\n\n\n//# sourceMappingURL=index.97750a8f.js.map\n","\"use strict\";\n\nvar mapping = {};\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\nfunction resolve(id) {\n  var resolved = mapping[id];\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n  return resolved;\n}\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"hzugU\\\":\\\"index.97750a8f.js\\\",\\\"8oBKS\\\":\\\"sprite.c1d1c491.png\\\",\\\"2yR5D\\\":\\\"index.9ef1ce9c.js\\\"}\"));","import * as twgl from \"twgl.js\"\r\n\r\nimport Stats from \"stats.js\"\r\n\r\n// stats();\r\nvar stats = new Stats();\r\nstats.showPanel(0);\r\ndocument.body.appendChild(stats.dom);\r\n\r\n// Most of the code is the same as drawSprite\r\n\r\n//// init\r\nconst canvas = document.querySelector(\"#c\")! as HTMLCanvasElement;\r\n// ensure that we trigger a resize on the first frame\r\ncanvas.width = 1;\r\ncanvas.height = 1;\r\nconst gl = canvas.getContext(\"webgl2\")!;\r\ngl.clearColor(0.5, 0.5, 0.75, 1.0);\r\n\r\nconst sprite_program_info = twgl.createProgramInfo(gl, [\r\n    // vs\r\n    `#version 300 es\r\n    \r\n    uniform vec2 u_resolution;\r\n    \r\n    // [0, 1]^2\r\n    in vec2 a_vertex;\r\n\r\n    // instancing\r\n    in vec2 i_position;\r\n    in vec2 i_size;\r\n\r\n    out vec2 v_texcoord;\r\n\r\n    void main() {\r\n        // if size is 100 & screen is 400, then\r\n        // clip space result width will be .5\r\n        vec2 pos = 2.0 * a_vertex * i_size / u_resolution;\r\n\r\n        // if position is 200 & screen is 400, then\r\n        // clip space result offset will be .5\r\n        pos += 2.0 * i_position / u_resolution;\r\n\r\n        // pos of 0 should go to the top left\r\n        pos -= vec2(1, 1);\r\n\r\n        // ypos = down\r\n        pos.y = -pos.y;\r\n\r\n        gl_Position = vec4(pos, 0, 1);\r\n\r\n        v_texcoord = a_vertex;\r\n    }\r\n    `,\r\n    // fs\r\n    `#version 300 es\r\n    precision highp float;\r\n\r\n    in vec2 v_texcoord;\r\n\r\n    uniform sampler2D u_texture;\r\n    \r\n    out vec4 out_color;\r\n\r\n    void main() {\r\n        out_color = texture(u_texture, v_texcoord);\r\n    }\r\n    `\r\n]);\r\n\r\n// game logic\r\nconst numInstances = 1000;\r\n\r\nlet positions = new Float32Array(numInstances * 2);\r\nfor (let k = 0; k < numInstances; k++) {\r\n    positions[k * 2 + 0] = Math.random() * 1000;\r\n    positions[k * 2 + 1] = Math.random() * 1000;\r\n}\r\n\r\nlet sizes = new Float32Array(numInstances * 2);\r\nfor (let k = 0; k < numInstances; k++) {\r\n    sizes[k * 2 + 0] = 100 + Math.random() * 50;\r\n    sizes[k * 2 + 1] = 100 + Math.random() * 50;\r\n}\r\n\r\nconst buffer_info = twgl.createBufferInfoFromArrays(gl, {\r\n    a_vertex: {\r\n        data: [\r\n            // Triangle for 1,1 corner\r\n            1.0, 1.0,\r\n            0.0, 1.0,\r\n            1.0, 0.0,\r\n            // Triangle for 0,0 corner\r\n            0.0, 0.0,\r\n            1.0, 0.0,\r\n            0.0, 1.0,\r\n        ],\r\n        numComponents: 2,\r\n        // stride, offset, etc. if needed\r\n    },\r\n    i_position: {\r\n        data: positions,\r\n        numComponents: 2,\r\n        divisor: 1, // changes every 1 instances\r\n        drawType: gl.DYNAMIC_DRAW,\r\n    },\r\n    i_size: {\r\n        data: sizes,\r\n        numComponents: 2,\r\n        divisor: 1,\r\n        drawType: gl.STATIC_DRAW,\r\n    },\r\n\r\n});\r\n\r\n// load texture\r\nconst textures = twgl.createTextures(gl, {\r\n    sprite_1: {\r\n        src: (new URL('sprite.png', import.meta.url)).toString(),\r\n        // mag: gl.NEAREST\r\n    },\r\n});\r\n\r\nlet last = 0;\r\nfunction update(now) {\r\n    stats.begin();\r\n    if (twgl.resizeCanvasToDisplaySize(canvas)) {\r\n        // on resize\r\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\r\n        gl.useProgram(sprite_program_info.program);\r\n        twgl.setUniforms(sprite_program_info, {\r\n            u_resolution: [gl.canvas.width, gl.canvas.height],\r\n        });\r\n    }\r\n    let delta = now - last;\r\n    last = now;\r\n\r\n    for (let k = 0; k < numInstances; k++) {\r\n        let x = positions[k * 2 + 0];\r\n        let y = positions[k * 2 + 1];\r\n        positions[k * 2 + 0] = (x + delta) % gl.canvas.width;\r\n        positions[k * 2 + 1] = (y + delta) % gl.canvas.height;\r\n    }\r\n\r\n    //// draw\r\n    gl.clear(gl.COLOR_BUFFER_BIT);\r\n\r\n    twgl.setAttribInfoBufferFromArray(gl, buffer_info.attribs!.i_position, positions);\r\n\r\n    gl.useProgram(sprite_program_info.program);\r\n    twgl.setBuffersAndAttributes(gl, sprite_program_info, buffer_info);\r\n    twgl.setUniforms(sprite_program_info, {\r\n        u_texture: textures.sprite_1,\r\n        u_resolution: [gl.canvas.width, gl.canvas.height],\r\n    });\r\n    twgl.drawBufferInfo(gl, buffer_info, gl.TRIANGLES, buffer_info.numElements, 0, numInstances);\r\n\r\n    stats.end();\r\n    requestAnimationFrame(update);\r\n}\r\n\r\nrequestAnimationFrame(update);\r\n","// stats.js - http://github.com/mrdoob/stats.js\n(function(f,e){\"object\"===typeof exports&&\"undefined\"!==typeof module?module.exports=e():\"function\"===typeof define&&define.amd?define(e):f.Stats=e()})(this,function(){var f=function(){function e(a){c.appendChild(a.dom);return a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();\nu(++l%c.children.length)},!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel(\"FPS\",\"#0ff\",\"#002\")),h=e(new f.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var t=e(new f.Panel(\"MB\",\"#f08\",\"#201\"));u(0);return{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();h.update(c-k,200);if(c>g+1E3&&(r.update(1E3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/\n1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}};f.Panel=function(e,f,l){var c=Infinity,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=h;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,h);b.fillStyle=f;b.fillText(e,t,v);\nb.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(h,w){c=Math.min(c,h);k=Math.max(k,h);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=f;b.fillText(g(h)+\" \"+e+\" (\"+g(c)+\"-\"+g(k)+\")\",t,v);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}};return f});\n","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"8oBKS\")).toString();"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","i","length","resolved","JSON","parse","$amYBK","$6746555fb9e221f4$var$stats","$parcel$interopDefault","a","__esModule","default","f","c","appendChild","dom","u","d","children","style","display","l","document","createElement","cssText","addEventListener","preventDefault","k","performance","Date","now","g","r","Panel","h","memory","t","REVISION","addPanel","showPanel","begin","end","update","usedJSHeapSize","jsHeapSizeLimit","domElement","setMode","Infinity","Math","round","devicePixelRatio","m","p","q","width","height","b","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","w","min","max","drawImage","body","$6746555fb9e221f4$var$canvas","querySelector","$6746555fb9e221f4$var$gl","clearColor","$6746555fb9e221f4$var$sprite_program_info","createProgramInfo","$6746555fb9e221f4$var$positions","Float32Array","$6746555fb9e221f4$var$numInstances","random","$6746555fb9e221f4$var$sizes","$6746555fb9e221f4$var$buffer_info","createBufferInfoFromArrays","a_vertex","data","numComponents","i_position","divisor","drawType","DYNAMIC_DRAW","i_size","STATIC_DRAW","$df69dc2948a7cce5$exports","URL","resolve","url","toString","$6746555fb9e221f4$var$textures","createTextures","sprite_1","src","$6746555fb9e221f4$var$last","requestAnimationFrame","$6746555fb9e221f4$var$update","resizeCanvasToDisplaySize","viewport","drawingBufferWidth","drawingBufferHeight","useProgram","program","setUniforms","u_resolution","canvas","delta","x","y","clear","COLOR_BUFFER_BIT","setAttribInfoBufferFromArray","attribs","setBuffersAndAttributes","u_texture","drawBufferInfo","TRIANGLES","numElements"],"version":3,"file":"index.97750a8f.js.map"}